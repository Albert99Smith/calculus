\documentclass{ximera}

\input{../preamble.tex}


\title[Dig-In:]{Explanation of the product and chain rules}

\begin{document}
\begin{abstract}
  We give explanation for the product rule and chain rule.
\end{abstract}
\maketitle


\section{Explanation of the product rule}

Linear approximations can help us explain why the product rule works.

\begin{theorem}[The product rule]
If $f$ and $g$ are differentiable, then
\[
\ddx f(x)g(x) = f(x)g'(x)+f'(x)g(x).
\]
\begin{explanation}
  To start, we need some way to understand the function
  \[
  A(x) = f(x) \cdot g(x).
  \]
  One interpertation of multiplication is it is the area of a $f(x)
  \times g(x)$ rectangle.
  \begin{image}
    \begin{tikzpicture}
      \draw [penColor,very thick,fill=fill1] (0,0) rectangle (5,4);
      \node [penColor] at (2.5,2) {$A(x) = f(x) \cdot g(x)$};
      \draw [decoration={brace,mirror,raise=.2cm},decorate,thin] (0,2)--(6,2);
      \node [below,penColor] at (2.5,0) {$x$};
    \end{tikzpicture}
  \end{image}
  If we change the inputs of $f$ and $g$ by $\d x$, then the size of
  the rectangle changes:
  \begin{image}
    another
  \end{image}
  However, we know from our previous work that
  \begin{align*}
    f(x+\d x) &\approx f(x) + \d f,\\
    g(x+\d x) &\approx g(x) + \d g,\\
  \end{align*}
  so now our picture becomes:
  \[

  \]
  Note, if we think of $A(x) = f(x)\cdot g(x)$, then we can also label
  our picture as follows:
  \[

  \]
  Finally, from the pictures above we see that
  \begin{align*}
    \d A &= f(x) \d g + g(x) \d f + \d f \d g\\
    &=f(x) g'(x) \d x + g(x) f'(x) \d x + f'(x) g'(x) \left(\d x\right)^2.
  \end{align*}
\end{explanation}
\end{theorem}    



\section{Explanation of the chain rule}

Now we'll use linear approximations to help explain why the chain rule
is true.

\begin{theorem}[Chain Rule]
If $f$ and $g$ are differentiable, then
\[
\ddx f(g(x)) = f'(g(x))g'(x).
\]
\begin{explanation}
   Using linear approximations at $x=g(0)$ and $x=0$, we'll show that
  \[
  \eval{\ddx f(g(x))}_{x=0} = f(g(0))g'(0).
  \]
  We know that for $x$ near $g(0)$ we have
  \[
  f(x) \approx f'(g(0)) (x-g(0)) + f(g(0)).
  \]
  For $x$ near $0$ we have
  \begin{align*}
    f(g(x)) &\approx f'(g(0)) (g(x)-g(0)) + f(g(0))\\
    g(x) &\approx x\cdot g'(0) + g(0).
  \end{align*}
  So
  \begin{align*}
  f(g(x)) &\approx f'(g(0)) (x\cdot g'(0) + g(0)-g(0)) + f(g(0))\\
  &\approx x\cdot f'(g(0))g'(0) + f(g(0)).
  \end{align*}
  Now for $x$ near $0$,
  \[
  \ddx f(g(x)) \approx f'(g(0))g'(0).
  \]
  So
  \[
  \eval{\ddx f(g(x))}_{x=0} = f(g(0))g'(0).
  \]
\end{explanation}
\end{theorem}

%% \begin{explanation}
%% Here we give a somewhat unrigoroius explanation, but it will serve our
%% purposes.

%% \begin{image}
%% \begin{tikzpicture}
%% 	\begin{axis}[
%%             axis lines=none,
%%             clip=false,
%%           ]          
%%           \addplot [->,textColor] plot coordinates {(0,0) (-2,-4)}; %% x axis
%%           \addplot [->,textColor] plot coordinates {(0,0) (0,6)}; %% y axis
%%           \addplot [->,textColor] plot coordinates {(0,0) (6,0)}; %% g(x) axis

%%           \addplot [dashed, textColor] plot coordinates {(-.7,-1.4) (1.4,-1.4)};
%%           \addplot [dashed, textColor] plot coordinates {(1.4,-1.4) (2.1,0)};
%%           \addplot [dashed, textColor] plot coordinates {(2.1,0) (2.1,4.1)};
          
%%           \addplot [dashed, textColor] plot coordinates {(2.6,-2.6) (3.5,0)};
%%           \addplot [dashed, textColor] plot coordinates {(3.5,0) (3.5,4.1)};

%%           \addplot [dashed, very thick, textColor] plot coordinates {(1.4,-1.4) (.8,-2.6)};
%%           \addplot [dashed, very thick, textColor] plot coordinates {(2.1,4.1) (3.5,4.1)};

%%           \addplot [very thick, penColor5] plot coordinates {(.8,-2.6) (2.6,-2.6)};
%%           \addplot [very thick, penColor4] plot coordinates {(3.5,4.1) (3.5,5.5)};

%%           \addplot [very thick,penColor,domain=(0:4)] {2+x};
%%           \addplot [very thick,penColor2,domain=(0:4)] {-x};

%%           \node at (axis cs:3.5,4.8) [anchor=west,penColor4] {$f'(g(a)){\color{penColor5}g'(a)h}$};
%%           \node at (axis cs:1.7,-2.6) [anchor=north,penColor5] {$g'(a)h$};
          
%%           \addplot[color=penColor2,fill=penColor2,only marks,mark=*] coordinates{(1.4,-1.4)};  %% closed hole          
%%           \addplot[color=penColor,fill=penColor,only marks,mark=*] coordinates{(2.1,4.1)};  %% closed hole          

%%           \node at (axis cs:1,-2.1) [anchor=south,yslant=0,xslant=0,rotate=53] {$\overbrace{\hspace{.36in}}^{h}$};
%%           \node at (axis cs:7,0) [anchor=east] {$g(x)$};
%%           \node at (axis cs:0,6.7) [anchor=north] {$y$};
%%           \node at (axis cs:-2.15,-4) [anchor=north] {$x$};
%%           \node at (axis cs:-.7,-1.4) [anchor=east] {$a$};
%%         \end{axis}
%% \end{tikzpicture}
%% %% \caption{A geometric interpretation of the chain rule. Increasing $a$
%% %%   by a ``small amount'' $h$, increases $f(g(a))$ by $f'(g(a))g'(a)h$. Hence, 
%% %% \[
%% %% \frac{\Delta y}{\Delta x}\approx \frac{f'(g(a))g'(a)h}{h} =
%% %% f'(g(a))g'(a).
%% %% \]} 
%% \end{image}

%% \end{explanation}



%% Previously we gave a picture to explain the chain rule. Now we give
%% the sheer, raw, unadulterated explanation.


%% \begin{theorem}[Chain Rule]\index{chain rule}\index{derivative rules!chain}
%% If $f(x)$ and $g(x)$ are differentiable, then
%% \[
%% \ddx f(g(x)) = f'(g(x))g'(x).
%% \]
%% \begin{explanation}
%% Let $g_0$ be some $x$-value and consider the following:
%% \[
%% f'(g_0) = \lim_{h\to 0}\frac{f(g_0+h)-f(g_0)}{h}.
%% \]

%% Set $h = g-g_0$ and we have
%% \[
%% f'(g_0) = \lim_{g\to g_0} \frac{f(g)-f(g_0)}{g-g_0}.
%% \]
%% At this point, we might like to set $g=g(x+h)$ and $g_0=g(x)$;
%% however, we cannot as we cannot be sure that
%% \[
%% g(x+h) - g(x) \ne 0\qquad\text{when $h\ne 0$.}
%% \]
%% To overcome this difficulty, let $E(g)$ be the ``error term'' that
%% gives the difference between the slope of the secant line from
%% $f(g_0)$ to $f(g)$ and $f'(g_0)$,
%% \[
%% E(g) = \frac{f(g)-f(g_0)}{g-g_0} - f'(g_0).
%% \]
%% In particular, $E(g)(g-g_0)$ is the difference between $f(g)$ and the
%% tangent line of $f(x)$ at $x=g$, see the figure below:

%% \begin{image}
%% \begin{tikzpicture}
%% 	\begin{axis}[
%%             clip=false,
%%             domain=0:2, range=0:6,ymax=4,ymin=0,
%%             axis lines =left, xlabel=$x$, ylabel=$y$,
%%             every axis y label/.style={at=(current axis.above origin),anchor=south},
%%             every axis x label/.style={at=(current axis.right of origin),anchor=west},
%%             xtick={1,1.666}, ytick={1,3},
%%             xticklabels={$g_0$,$g$}, yticklabels={$f(g_0)$,$f(g)$},
%%             axis on top,
%%           ]         
%% 	  \addplot [textColor,dashed] plot coordinates {(1,0) (1,1)};
%%           \addplot [textColor,dashed] plot coordinates {(0,1) (1,1)};
%%           \addplot [textColor,dashed] plot coordinates {(0,3) (1.666,3)};
%%           \addplot [textColor,dashed] plot coordinates {(1.666,0) (1.666,1)};

%%           \addplot [textColor,dashed,very thick] plot coordinates {(1,1) (1.666,1)};
%%           \node at (axis cs:1.333,1) [anchor=north] {$\underbrace{\hspace{.75in}}_{g-g_0}$};

%%           \addplot [penColor4,very thick] plot coordinates {(1.666,1) (1.666,1.666)};
%%           \addplot [penColor5,very thick] plot coordinates {(1.666,1.666) (1.666,3)};

%%           \node at (axis cs:1.666,1.333) [anchor=west] {$f'(g_0)(g-g_0)$};
%%           \node at (axis cs:1.666,2.333) [anchor=west] {$E(g)(g-g_0)$};

%%           \addplot [very thick,penColor, smooth,domain=(0:7/4)] {-1/(x-2)};
%%           \addplot [very thick,penColor2, smooth,domain=(0:2)] {x};

%%           \addplot[color=penColor,fill=penColor,only marks,mark=*] coordinates{(1.666,3)};  %% closed hole          
%%           \addplot[color=penColor,fill=penColor,only marks,mark=*] coordinates{(1,1)};  %% closed hole          
%%         \end{axis}
%% \end{tikzpicture}
%% \end{image}

%% Hence we see that
%% \[
%% f(g)-f(g_0) = \left(f'(g_0) + E(g)\right)(g-g_0),
%% \]
%% and so
%% \[
%% \frac{f(g)-f(g_0)}{g-g_0} = f'(g_0) + E(g).
%% \]
%% Combining this with the fact that 
%% \[
%% f'(g_0) = \lim_{g\to g_0} \frac{f(g)-f(g_0)}{g-g_0}
%% \]
%% we have that
%% \begin{align*}
%% f'(g_0) &= \lim_{g\to g_0}\frac{f(g)-f(g_0)}{g-g_0} \\
%% &= \lim_{g\to g_0}f'(g_0) + E(g)\\
%% &= f'(g_0) + \lim_{g\to g_0} E(g),
%% \end{align*}
%% and hence it follows that $\lim_{g\to g_0} E(g) = 0$. At this point,
%% we may return to the ``well-worn path.'' Starting with
%% \[
%% f(g)-f(g_0) = \left(f'(g_0) + E(g)\right)(g-g_0),
%% \]
%% divide both sides by $h$ and set
%% $g=g(x+h)$ and $g_0=g(x)$
%% \[
%% \frac{f(g(x+h))-f(g(x))}{h} = \left(f'(g(x)) +
%% E(g(x+h))\right)\frac{g(x+h)-g(x)}{h}.
%% \]
%% Taking the limit as $h$ approaches $0$, we see 
%% \begin{align*}
%% \lim_{h\to 0}\frac{f(g(x+h))-f(g(x))}{h} &= \lim_{h\to 0}\left(f'(g(x))
%% + E(g(x+h))\right)\frac{g(x+h)-g(x)}{h}\\
%% &= \lim_{h\to 0}\left(f'(g(x))
%% + E(g(x+h))\right)\lim_{h\to 0}\frac{g(x+h)-g(x)}{h}\\
%% &= f'(g(x))g'(x).
%% \end{align*}
%% Hence, $\ddx f(g(x))= f'(g(x))g'(x)$.
%% \end{explanation}
%% \end{theorem}


\end{document}
